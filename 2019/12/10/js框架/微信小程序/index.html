<!DOCTYPE html><html lang="cn"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 微信小程序 · 快乐的图小灵</title><meta name="description" content="微信小程序 - turing5467"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favi.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://turing5467.github.io/atom.xml" title="快乐的图小灵"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">图小灵的博客</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="https://github.com/turing5467" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">微信小程序</h1><div class="post-info">Dec 10, 2019</div><div class="post-content"><h2 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h2><ul>
<li><p>微信小程序是腾讯于2017年1月9日推出的一种不需要下载安装即可在微信平台上使用的应用，主要提供给企业、政府、媒体、其他组织或 个人的开发者</p>
</li>
<li><p>本质与微信的原生功能应用是一样的–都是Web APP</p>
</li>
<li><p>优势</p>
<ol>
<li>开发适配成本低(推广APP的成本过高)</li>
<li>微信有海量用户，且粘性很高，在微信里开发产品更容易触达用户</li>
<li>容易小规模试错，然后快速迭代</li>
<li>跨平台</li>
</ol>
</li>
<li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html" target="_blank" rel="noopener">文档</a></p>
</li>
</ul>
<h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><ol>
<li><p>注册账号：<a href="https://mp.weixin.qq.com/cgi-bin/registermidpage?action=index&lang=zh_CN&token=" target="_blank" rel="noopener">链接</a></p>
</li>
<li><p>获取APPId：<img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191210153423531.png" alt="image-20191210153423531"></p>
</li>
</ol>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191210153456694.png" alt="image-20191210153456694"></p>
<ol start="3">
<li><p>开发工具：微信自己的微信开发者工具：<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">地址</a></p>
</li>
<li><p>调试页面</p>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20191210160627943.png" alt="image-20191210160627943"></p>
</li>
</ol>
<h3 id="结构目录"><a href="#结构目录" class="headerlink" title="结构目录"></a>结构目录</h3><h4 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h4><table>
<thead>
<tr>
<th></th>
<th>传统web</th>
<th>小程序</th>
</tr>
</thead>
<tbody><tr>
<td>结构</td>
<td>HTML</td>
<td>WXML</td>
</tr>
<tr>
<td>表现</td>
<td>CSS</td>
<td>WXSS</td>
</tr>
<tr>
<td>行为</td>
<td>JS</td>
<td>JS</td>
</tr>
<tr>
<td>配置</td>
<td>无</td>
<td>3JSON</td>
</tr>
</tbody></table>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pages/</span><br><span class="line">	index/</span><br><span class="line">		index.wxml</span><br><span class="line">		index.wxss</span><br><span class="line">		index.js</span><br><span class="line">	<span class="built_in">log</span>/</span><br><span class="line">		log.wxml</span><br><span class="line">		log.wxss</span><br><span class="line">		log.js</span><br><span class="line">		log.json	//<span class="built_in">log</span>页面相关配置</span><br><span class="line">utils/	//工具函数</span><br><span class="line">app.js	//入口文件 </span><br><span class="line">app.json	//小程序相关配置(如标题)</span><br><span class="line">app.wxss	//全局样式</span><br><span class="line">project.config.json	//开发者相关配置(类似于node的package.json)</span><br></pre></td></tr></table></figure>

<h4 id="app-json"><a href="#app-json" class="headerlink" title="app.json"></a>app.json</h4><ul>
<li><p>当前小程序的全局配置，包括小程序的所有页面路径、界面表现、网络超时时间，底部Tab。</p>
</li>
<li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener">文档</a></p>
</li>
<li><p>常用字段</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"pages"</span>: [		//用于制定法小程序由哪些页面组成</span><br><span class="line">        <span class="string">"pages/index/index"</span>,	//第一项代表小程序的初始页面</span><br><span class="line">        <span class="string">"pages/log/log"</span>		//通过修改pages数组，增加/减少页面</span><br><span class="line">    ],</span><br><span class="line">    "window": &#123;		//用于设置小程序的状态栏、导航条、标题、窗口背景色。</span><br><span class="line">        "navigationBarBackgroundColor": "light",</span><br><span class="line">        "navigationBarTitleText": "标题"</span><br><span class="line">    &#125;,</span><br><span class="line">    "tabBar": &#123;		//tab栏的表现</span><br><span class="line">        "color": "#000",</span><br><span class="line">        "selectedColor": "#f23030",</span><br><span class="line">        "list": [	//最少2个，最多5个tab</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"pagePath"</span>: <span class="string">"pages/index/index"</span>,</span><br><span class="line">                <span class="attr">"text"</span>: <span class="string">"首页"</span>,</span><br><span class="line">                <span class="attr">"iconPath"</span>: <span class="string">"icons/index.png"</span>,</span><br><span class="line">                <span class="attr">"selectedIconPath"</span>: <span class="string">"icons/index_active.png"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            //...</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="json"><a href="#json" class="headerlink" title=".json"></a>.json</h4><ul>
<li><p><strong>每个页面</strong>独立定义的一些属性，这些属性只能设置app.json中部分window配置项的内容</p>
</li>
<li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">文档</a></p>
</li>
</ul>
<h4 id="数据绑定-同React与Vue的综合"><a href="#数据绑定-同React与Vue的综合" class="headerlink" title="数据绑定(同React与Vue的综合)"></a>数据绑定(同React与Vue的综合)</h4><ul>
<li><p>wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//index.wxml(无需引用js文件，直接使用变量)</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">	&#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">"&#123;&#123;false&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: <span class="string">"Hello 小程序"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//修改数据：this.setData(&#123;&#125;)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>循环（数组或对象）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;view wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;arr&#125;&#125;"</span> wx:key=<span class="string">"&#123;&#123;index&#125;&#125;"</span> &gt;</span><br><span class="line">	&#123;&#123;index&#125;&#125; : &#123;&#123;item&#125;&#125;</span><br><span class="line">	&lt;!--</span><br><span class="line">    	index: 索引值/属性名，可通过wx:<span class="keyword">for</span>-item修改变量名</span><br><span class="line">		item: 属性值，可通过wx:<span class="keyword">for</span>-index修改变量名</span><br><span class="line">    --&gt;</span><br><span class="line">&lt;<span class="regexp">/view&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>条件渲染</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;view == 'WEBVIEW'&#125;&#125;"</span>&gt;</span> WEBVIEW <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">"&#123;&#123;view == 'APP'&#125;&#125;"</span>&gt;</span> APP <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>=<span class="string">"&#123;&#123;view == 'MINA'&#125;&#125;"</span>&gt;</span> MINA <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>wxss</p>
<ul>
<li><p>引入外部样式：<code>@import &quot;相对路径/&quot;</code></p>
</li>
<li><p>内联样式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">"background-color: yellow"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">"&#123;&#123;classObj&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ul>
<ul>
<li><p>组件样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">view</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#194</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p>不支持通配符</p>
</li>
<li><p>推荐使用flex布局</p>
</li>
</ul>
<h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><ul>
<li><p><code>bindtap</code>：点击事件，默认参数为event</p>
</li>
<li><p><code>&#39;bind&#39;+&#39;xx&#39;</code>：对应冒泡事件</p>
</li>
<li><p><code>&#39;catch&#39;+&#39;xx&#39;</code>：对应非冒泡事件</p>
</li>
<li><p>传递参数：</p>
<ul>
<li>在标签中通过data-xx设置</li>
<li>在实践中通过<code>e.target.dataset.xx</code>获取数据</li>
</ul>
</li>
</ul>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><h4 id="小程序适配方案"><a href="#小程序适配方案" class="headerlink" title="小程序适配方案"></a>小程序适配方案</h4><ul>
<li><strong>rpx（responsive pixel</strong>）: 可以根据屏幕宽度进行<strong>自适应</strong>。</li>
<li>iphone6: 1rpx = 1物理像素 = 0.5px</li>
<li>换算方式<ol>
<li>以iphone6的物理像素个数为标准：750</li>
<li>1rpx = 目标设备宽度/750 px</li>
<li>注意此时底层已经做了viewport适配的处理，即实现了理想视口</li>
</ol>
</li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote>
<p>所有标签都必须闭合over</p>
</blockquote>
<h4 id="基础组件"><a href="#基础组件" class="headerlink" title="基础组件"></a>基础组件</h4><ul>
<li><p><code>&lt;view&gt;</code></p>
<ul>
<li><p><code>hover-class</code>属性指定<strong>按下</strong>时的样式类，为none时，为点击态效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view  class=&quot;nav-item &#123;&#123;index==curIndex?active:&quot;&quot;&#125;&#125;&quot; &gt;&lt;/view&gt;</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>&lt;scroll-view&gt;</code></p>
<ul>
<li><code>scroll-x</code></li>
</ul>
</li>
<li><p><code>&lt;text&gt;</code></p>
<ul>
<li><code>selectable</code> 文本是否可选</li>
<li><code>space</code>显示连续空格</li>
<li><code>decode</code>是否解码</li>
</ul>
</li>
<li><p><code>&lt;image&gt;</code>图片标签（默认320×240），是web中img标签和背景图片的结合体</p>
<ul>
<li><p><code>src</code></p>
</li>
<li><p><code>mode</code></p>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200105151957519.png" alt="image-20200105151957519"></p>
</li>
<li><p><code>lazy-load</code></p>
</li>
</ul>
</li>
<li><p><code>&lt;block&gt;</code>渲染一个无包裹元素的结构快</p>
</li>
</ul>
<h4 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">autoplay</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span> <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"xx"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span> <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span> <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"xx"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span> <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>·<code>swiper</code><ul>
<li><code>autoplay</code>、<code>interval</code>、<code>duration</code>、<code>current</code></li>
<li><code>circular</code>是否采用衔接滑动(最后一张接到第一张)</li>
<li><code>indicator-dots</code>、<code>indicator-color</code>、<code>indicator-active-color</code></li>
</ul>
</li>
</ul>
<h4 id="导航组件"><a href="#导航组件" class="headerlink" title="导航组件"></a>导航组件</h4><ul>
<li><code>navigator</code><ul>
<li><code>target</code> 在哪个目标上发生跳转，默认当前小程序 <pre><code>- self</code></pre><ul>
<li><code>url</code> 当前小程序内的跳转链接 </li>
</ul>
</li>
<li><code>open-type</code> 跳转方式<pre><code>- navigate、redirect、
     - switchTab、
         - reLaunch、navigateBack、exit</code></pre></li>
</ul>
</li>
</ul>
<h4 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h4><ul>
<li><code>&lt;video&gt;</code><ul>
<li>src、duration、autoplay、loop、muted</li>
</ul>
</li>
</ul>
<h4 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h4><ul>
<li><p>components文件夹 -&gt; 组建文件夹 -&gt; 输入组件名 -&gt; 自动生成四个对应文件</p>
</li>
<li><p>编写组件内容</p>
</li>
<li><p>引用组件：</p>
<ul>
<li><p>首先在页面中的json文件总进行引用声明，还要提供对应的组件名和路径</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"usingComponents"</span>: &#123;</span><br><span class="line">        //组件名：组件路径</span><br><span class="line">        "cpnName": "../../"</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>引用组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cpnName</span>&gt;</span><span class="tag">&lt;/<span class="name">cpnName</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wx.request(&#123;</span><br><span class="line">    url: <span class="string">''</span>,</span><br><span class="line">    success() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</div></article></div></main><footer><div class="paginator"><a href="/2019/12/19/面试/HTML-CSS/" class="prev">上一篇</a><a href="/2019/11/18/面试/代码手写题/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2019/12/10/js框架/微信小程序/';
var disqus_title = '微信小程序';
var disqus_url = 'https://turing5467.github.io/2019/12/10/js框架/微信小程序/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2019 - 2020 <a href="https://turing5467.github.io">turing5467</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>